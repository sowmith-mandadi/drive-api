runtime: python39
entrypoint: gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app

# Add explicit scaling configuration
automatic_scaling:
  max_instances: 10
  min_instances: 1
  target_cpu_utilization: 0.65

env_variables:
  # Basic settings - hardcoded for initial deployment
  SESSION_SECRET_KEY: "dev-secret-replace-in-production"
  GOOGLE_CLOUD_PROJECT: "conference-cms-project"
  GOOGLE_CLIENT_ID: "your-client-id-here.apps.googleusercontent.com"

  # Feature flags - turn off advanced features for initial deployment
  USE_GCS: "false"
  USE_CLOUD_TASKS: "false"

  # AI/ML Settings
  VERTEX_RAG_MODEL: "text-bison"

  # Storage settings
  GCS_FOLDER_PREFIX: "uploads"

  # Cloud Tasks settings
  GCP_LOCATION: "us-central1"

  # Temp directory settings for App Engine (writable paths)
  TEMP_UPLOAD_DIR: "/tmp/uploads"
  TEMP_PROCESSING_DIR: "/tmp/processing"
  UPLOAD_BUCKET_DIR: "/tmp/bucket"
